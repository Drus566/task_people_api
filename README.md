# Task people api

## Тестовое задание Rails
Необходимо реализовать приложение, которое реализует следующий
функционал:
* В базу добавляются домены, для которых нужно отслеживать проблемы с SSL сертификатами
* Нельзя дважды добавить один и тот же домен
* У домена есть два статуса - "всё хорошо" и "всё плохо"
* По результатам проверки, у домена меняется статус
* Текст ошибки должен сохраняться в той же модели
* Проверки должны происходить в фоне, раз в 20 минут
* Нужно подключить веб-интерфейс sidekiq и закрыть его Basic-авторизацией

> Для проверки можно использовать openssl, проверка должна происходить внутри приложения, без использования сторонних API и сервисов. Интерфейс реализовывать не нужно, только API.

## Технологии и пакеты
Обязательно использовать следующие решения и пакеты: 
* Rails 6 
* grape
* grape-entity
* PostgreSQL
* sidekiq
* sidekiq-scheduler.

Postgres и Redis (нужен для sidekiq) запускать через docker-compose, для приложения нужно написать `Procfile`. Для управления состоянием у доменов можно использовать AASM. Бонусные баллы за настроенный rubocop и следование ему. 

## Отслеживаемые параметры
1. Сертификат истекает менее чем через 2 недели
2. Сертификат истекает менее чем через 1 неделю
3. Сертификат истёк
4. Ошибка SSL (для тестов можно использовать badssl.com и их примеры)
5. Ошибка установки соединения, не связанная с SSL
6. "Всё хорошо"

## API
### Необходимо реализовать следующие методы:
* выводит все домены с их текущим состоянием
* добавляет новый домен в список, при добавлении домена должна сразу же кидаться задача на проверку


### Команды
Должны быть установлены Docker и Docker compose

```
git clone git@github.com:Drus566/task_people_api.git
# установка докера
sudo docker-compose up -d
# установка базы данных
sudo docker-compose exec app bundle exec rake db:setup db:migrate
# чтобы остановить контейнеры
sudo docker-compose down
# чтобы остановить и удалить созданную в контейнере базу данных 
sudo docker-compose down --volumes
```